<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <title>Phpactor</title>

        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
        <link rel="stylesheet" href="https://phpactor.github.io/phpactor/css/font-awesome.min.css">
        <link rel="stylesheet" href="https://phpactor.github.io/phpactor/css/highlight.tomorrow-night.css">
        <link rel="stylesheet" href="https://phpactor.github.io/phpactor/css/main.css">
    </head>
    <body>

        <main class="container-fluid">
            <div class="row">

                    <nav id="sidebar" class="col-sm-3 col-lg-2" role="navigation">
                        <div class="logo">
<center>
							<a href="https://phpactor.github.io/phpactor"><img src="https://phpactor.github.io/phpactor/images/logo-small.png" /></a>
							<br/>
							<b>Phpactor</b><br/> <i>Intelligent completion and refactoring tool for PHP</i>
</center>
						</div>

                                                    <p class="text-muted">
                                Home
                            </p>

                            <ul class="nav nav-pills nav-stacked">
                                                                    <li class="">
                                        <a href="https://phpactor.github.io/phpactor/index.html">
                                            About
                                        </a>
                                    </li>
                                                            </ul>
                                                    <p class="text-muted">
                                Usage
                            </p>

                            <ul class="nav nav-pills nav-stacked">
                                                                    <li class="">
                                        <a href="https://phpactor.github.io/phpactor/standalone.html">
                                            Standalone
                                        </a>
                                    </li>
                                                                    <li class="">
                                        <a href="https://phpactor.github.io/phpactor/vim-plugin.html">
                                            VIM plugin
                                        </a>
                                    </li>
                                                                    <li class="">
                                        <a href="https://phpactor.github.io/phpactor/configuration.html">
                                            Configuration
                                        </a>
                                    </li>
                                                            </ul>
                                                    <p class="text-muted">
                                Reference
                            </p>

                            <ul class="nav nav-pills nav-stacked">
                                                                    <li class="">
                                        <a href="https://phpactor.github.io/phpactor/navigation.html">
                                            Navigation
                                        </a>
                                    </li>
                                                                    <li class="active">
                                        <a href="https://phpactor.github.io/phpactor/refactorings.html">
                                            Refactorings
                                        </a>
                                    </li>
                                                            </ul>
                                                    <p class="text-muted">
                                Other topics
                            </p>

                            <ul class="nav nav-pills nav-stacked">
                                                                    <li class="">
                                        <a href="https://phpactor.github.io/phpactor/integrations.html">
                                            Integrations
                                        </a>
                                    </li>
                                                                    <li class="">
                                        <a href="https://phpactor.github.io/phpactor/history.html">
                                            History
                                        </a>
                                    </li>
                                                                    <li class="">
                                        <a href="https://phpactor.github.io/phpactor/developing.html">
                                            Debugging Phpactor
                                        </a>
                                    </li>
                                                                    <li class="">
                                        <a href="https://phpactor.github.io/phpactor/rpc.html">
                                            RPC Protocol
                                        </a>
                                    </li>
                                                            </ul>
                        
                    </nav>

                <section class="col-sm-offset-3 col-lg-offset-2 col-sm-9 col-lg-10">
                    <h1 id="refactorings">Refactorings</h1>
<p>Fixes:</p>
<ul>
<li><a href="#add-missing-assignments">Add Missing Assignments</a></li>
<li><a href="#complete-constructor">Complete Constructor</a></li>
<li><a href="#fix-namespace-or-class-name">Fix namespace and/or class name</a></li>
<li><a href="#generate-accessor">Generate Accessor</a></li>
<li><a href="#generate-method">Generate Method</a></li>
<li><a href="#implement-contracts">Implement Contracts</a></li>
<li><a href="#import-class">Import Class</a></li>
<li><a href="#override-method">Override Method</a></li>
</ul>
<p>Generation:</p>
<ul>
<li><a href="#class-new">Class New</a></li>
<li><a href="#class-copy">Class Copy</a></li>
<li><a href="#extract-interface">Extract Interface</a></li>
</ul>
<p>Refactoring:</p>
<ul>
<li><a href="#class-move">Class Move</a></li>
<li><a href="#extract-constant">Extract Constant</a></li>
<li><a href="#extract-expression">Extract Expression</a></li>
<li><a href="#extract-method">Extract Method</a></li>
<li><a href="#rename-class">Rename Class</a></li>
<li><a href="#rename-member">Rename Class Member</a></li>
<li><a href="#rename-variable">Rename Variable</a></li>
</ul>
<h2 id="add-missing-assignments">Add Missing Assignments</h2>
<p>Automatically add any missing properties to a class.</p>
<ul>
<li><strong>Command</strong>: <code>$ phpactor class:transform path/to/Class.php --transform=add_missing_assignments</code></li>
<li><strong>VIM Context Menu</strong>: <em>Class context menu &gt; Implement Contracts</em>.</li>
<li><strong>VIM Command</strong>:<code>:call phpactor#Transform()</code></li>
</ul>
<h3 id="motivation">Motivation</h3>
<p>When authoring a class it is redundant effort to add a property and documentation tag when making an assignment. This
refactoring will scan for any assignments which have do not have corresponding properties and add the required properties with docblocks based on inferred types where possible.</p>
<h3 id="before-and-after">Before and After</h3>
<pre><code class="language-php">&lt;?php

class AcmeBlogTest extends TestCase
{
    public function setUp()
    {
        $this-&gt;blog = new Blog();
    }
}</code></pre>
<p>Becomes:</p>
<pre><code class="language-php">&lt;?php

class AcmeBlogTest extends TestCase
{
    /**
     * @var Blog
     */
    private $blog;

    public function setUp()
    {
        $this-&gt;blog = new Blog();
    }
}</code></pre>
<h2 id="class-copy">Class Copy</h2>
<p>Copy an existing class to another location updating its name and namespace.</p>
<ul>
<li><strong>Command</strong>: <code>$ phpactor class:copy path/to/ClassA.php path/to/ClassB.php</code> (class FQN also accepted).</li>
<li><strong>VIM context menu</strong>: <em>Class context menu &gt; Copy Class</em></li>
<li><strong>VIM function</strong>:<code>:call phpactor#CopyFile()</code></li>
</ul>
<h3 id="motivation-1">Motivation</h3>
<p>Sometimes you find that an existing class is a good starting point for a new class. In this situation you may:</p>
<ol>
<li>Copy the class to a new file location.</li>
<li>Update the class name and namespace.</li>
<li>Adjust the copied class as necessary.</li>
</ol>
<p>This refactoring performs steps 1 and 2.</p>
<h3 id="before-and-after-1">Before and After</h3>
<pre><code class="language-php"># src/Blog/Post.php
&lt;?php

namespace Acme\Blog;

class Post
{
    public function title()
    {
        return 'Hello';
    }
}</code></pre>
<p>After moving to <code>src/Cms/Article.php</code>:</p>
<pre><code class="language-php"># src/Cms/Page.php
&lt;?php

namespace Acme\Cms;

class Article
{
    public function title()
    {
        return 'Hello';
    }
}</code></pre>
<h2 id="class-move">Class Move</h2>
<p>Move a class (or folder containing classes) from one location to another.</p>
<ul>
<li><strong>Command</strong>: <code>$ phpactor class:move path/to/ClassA.php path/to/ClassB.php</code> (class FQN also accepted).</li>
<li><strong>VIM context menu</strong>: <em>Class context menu &gt; Move Class</em></li>
<li><strong>VIM function</strong>:<code>:call phpactor#MoveFile()</code></li>
</ul>
<h3 id="motivation-2">Motivation</h3>
<p>When authoring classes, it is often difficult to determine really appropriate
names and namespaces, this is unfortunate as a class name can quickly propagate
through your code, making the class name harder to change as time goes on.</p>
<p>This problem is multiplied if you have chosen an incorrect namespace.</p>
<p>This refactoring will move either a class, class-containing-file or folder to a
new location, updating the classes namespace and all references to that class
where possible in a given <em>scope</em> (i.e. files known by GIT: <code>git</code>, files known by Composer: <code>composer</code>, or all PHP files under
the current CWD: <code>simple</code>).</p>
<div class="alert alert-danger">
This is a dangerous refactoring! Ensure that you commit your work before
executing it and be aware that success is not guaranteed (e.g. class references
in non-PHP files or docblocks are not currently updated).

This refactoring works best when you have a well tested code base.
</div>
<h3 id="before-and-after-2">Before and After</h3>
<pre><code class="language-php"># src/Blog/Post.php
&lt;?php

namespace Acme\Blog;

class Post
{
}</code></pre>
<p>After moving to <code>src/Writer.php</code>:</p>
<pre><code class="language-php"># src/Writer.php
&lt;?php

namespace Acme;

class Writer
{
}</code></pre>
<h2 id="class-new">Class New</h2>
<p>Generate a new class with a name and namespace at a given location or from a class name.</p>
<ul>
<li><strong>Command</strong>: <code>$ phpactor class:new path/To/ClassName.php</code> (class FQN also accepted).</li>
<li><strong>VIM context menu</strong>: <em>Class context menu &gt; New Class</em></li>
<li><strong>VIM function</strong>:<code>:call phpactor#ClassNew()</code></li>
</ul>
<h3 id="motivation-3">Motivation</h3>
<p>Creating classes is one of the most general actions we perform:</p>
<ol>
<li>Create a new file.</li>
<li>Code the namespace, ensuring that it is compatible with the autoloading scheme.</li>
<li>Code the class name, ensuring that it is the same as the file name.</li>
</ol>
<p>This refactoring will perform steps 1, 2 and 3 for:</p>
<ul>
<li>Any given file name.</li>
<li>Any given class name.</li>
<li>A class name under the cursor.</li>
</ul>
<p>It is also possible to choose a class template, see <a href="templates.html">templates</a>
for more information.</p>
<h3 id="before-and-after-3">Before and After</h3>
<div class="alert alert-success">
This example is from an existing, empty, file. Note that you can also use
the context menu to generate classes from non-existing class names in the current
file
</div>
<p>Given a new file:</p>
<pre><code class="language-php"># src/Blog/Post.php</code></pre>
<p>After invoking <em>class new</em> using the <code>default</code> variant:</p>
<pre><code class="language-php">&lt;?php

namespace Acme/Blog;

class Post
{
}</code></pre>
<h2 id="complete-constructor">Complete Constructor</h2>
<p>Complete the assignments and add properties for an incomplete constructor.</p>
<ul>
<li><strong>Command</strong>: <code>$ phpactor class:transform path/to/class.php --transform=complete_constructor</code></li>
<li><strong>VIM plugin</strong>: <em>Class context menu &gt; Complete Constructor</em>.</li>
<li><strong>VIM function</strong>:<code>:call phpactor#Transform()</code></li>
</ul>
<h3 id="motivation-4">Motivation</h3>
<p>When authoring a new class, it is often required to:</p>
<ol>
<li>Create a constructor method with typed arguments.</li>
<li>Assign the arguments to class properties.</li>
<li>Create the class properties with docblocks.</li>
</ol>
<p>This refactoring will automatically take care of 2 and 3.</p>
<h3 id="before-and-after-4">Before and After</h3>
<pre><code class="language-php">&lt;?php

class Post
{
    public function __construct(Hello $hello, Goodbye $goodbye)
    {
    }
}</code></pre>
<p>After:</p>
<pre><code class="language-php">&lt;?php

class Post
{
    /**
     * @var Hello
     */
    private $hello;

    /**
     * @var Goodbye
     */
    private $goodbye;

    public function __construct(Hello $hello, Goodbye $goodbye)
    {
        $this-&gt;hello = $hello;
        $this-&gt;goodbye = $goodbye;
    }
}</code></pre>
<h2 id="fix-namespace-or-class-name">Fix Namespace or Class Name</h2>
<p>Update a file's namespace (and/or class name) based on the composer
configuration.</p>
<ul>
<li><strong>Command</strong>: <code>$ phpactor class:transform path/to/class.php --transform=complete_constructor</code></li>
<li><strong>VIM plugin</strong>: <em>Class context menu &gt; Transform &gt; Fix namespace or classname</em>.</li>
<li><strong>VIM function</strong>: <code>:call phpactor#Transform()</code></li>
</ul>
<div class="alert alert-warning">
This refactoring will currently only work fully on Composer based projects.
</div>
<h3 id="motivation-5">Motivation</h3>
<p>Phpactor already has the possibility of generating new classes, and moving
classes. But sometimes your project may get into a state where
class-containing files have an incorrect namespace or class name.</p>
<p>This refactoring will:</p>
<ul>
<li>Update the namespace based on the file path (and the autoloading config).</li>
<li>Update the class name.</li>
<li>When given an empty file, it will generate a PHP tag and the namespace.</li>
</ul>
<h3 id="before-and-after-5">Before and After</h3>
<pre><code class="language-php">// lib/Barfoo/Hello.php
&lt;?php

class Foobar
{
    public function hello()
    {
        echo 'hello';
    }
}</code></pre>
<p>After:</p>
<pre><code class="language-php">// lib/Barfoo/Hello.php
&lt;?php

namespace Barfoo;

class Hello
{
    public function hello()
    {
        echo 'hello';
    }
}</code></pre>
<h2 id="extract-constant">Extract Constant</h2>
<p>Extract a constant from a scalar value.</p>
<ul>
<li><strong>Command</strong>: <em>RPC only</em></li>
<li><strong>VIM plugin</strong>: <em>Symbol context menu &gt; Extract Constant</em>.</li>
<li><strong>VIM function</strong>:<code>:call phpactor#ContextMenu()</code></li>
</ul>
<h3 id="motivation-6">Motivation</h3>
<p>Each time a value is duplicated in a class a fairy dies. Duplicated values
increase the fragility of your code. Replacing them with a constant helps to
ensure runtime integrity.</p>
<p>This refactoring includes <a href="https://refactoring.com/catalog/replaceMagicNumberWithSymbolicConstant.html">Replace Magic Number with Symbolic
Constant</a>
(Fowler, Refactoring).</p>
<h3 id="before-and-after-6">Before and After</h3>
<p>Cursor position shown as <code>&lt;&gt;</code>:</p>
<pre><code class="language-php">&lt;?php

class DecisionMaker
{
    public function yesOrNo($arg)
    {
        if ($arg == 'y&lt;&gt;es') {
            return true;
        }

        return false;
    }

    public function yes()
    {
        return 'yes';
    }
}</code></pre>
<p>After:</p>
<pre><code class="language-php">&lt;?php

class DecisionMaker
{
    const YES = 'yes';

    public function yesOrNo($arg)
    {
        if ($arg == self::YES) {
            return true;
        }

        return false;
    }

    public function yes()
    {
        return self::YES;
    }
}</code></pre>
<h2 id="extract-expression">Extract Expression</h2>
<p>Extract an expression</p>
<ul>
<li><strong>Command</strong>: <em>VIM function only</em></li>
<li><strong>VIM plugin</strong>: <em>VIM function only</em></li>
<li><strong>VIM function</strong>:<code>:call phpactor#ExtractExpression()</code> (call with
<code>v:true</code> to invoke on a selection)</li>
</ul>
<h3 id="motivation-7">Motivation</h3>
<p>Sometimes you find yourself using inline expressions, and later you realise
that you want to re-use that value.</p>
<h3 id="before-and-after-7">Before and After</h3>
<p>Cursor position shown as <code>&lt;&gt;</code>:</p>
<pre><code class="language-php">&lt;?php

if (&lt;&gt;1 + 2 + 3 + 5 === 6) {
    echo 'You win!';
}</code></pre>
<p>After (entering <code>$hasWon</code> as a variable name):</p>
<pre><code class="language-php">&lt;?php

$hasWon = 1 + 2 + 3 + 5 === 6;
if ($hasWon) {
    echo 'You win!';
}</code></pre>
<p>Note that this also works with a visual selection if you invoke the VIM
function with <code>v:true</code>:</p>
<pre><code class="language-php">&lt;?php

if (&lt;&gt;1 + 2 + 3 + 5&lt;&gt; === 6) {
    echo 'You win!';
}</code></pre>
<p>After (using <code>$winningCombination</code> as a variable name):</p>
<pre><code class="language-php">&lt;?php

$winningCombination = 1 + 2 + 3 + 5;
if ($winningCombination == 6) {
    echo 'You win!';
}</code></pre>
<h2 id="extract-method">Extract Method</h2>
<p>Extract a method from a selection.</p>
<ul>
<li><strong>Command</strong>: <em>RPC only</em></li>
<li><strong>VIM plugin</strong>: <em>Function only</em></li>
<li><strong>VIM function</strong>:<code>:call phpactor#mxtractMethod()</code></li>
</ul>
<p>This refactoring is NOT currently available through the context menu. You
will need to <a href="vim-plugin.html#keyboard-mappings">map it to a keyboard shortcut</a>
or invoke it manually.</p>
<h3 id="motivation-8">Motivation</h3>
<p>This is one of the most common refactorings. Decomposing code into discrete
methods helps to make code understandable and maintainable.</p>
<p>Extracting a method manually involes:</p>
<ol>
<li>Creating a new method</li>
<li>Moving the relevant block of code to that method.</li>
<li>Scanning the code for variables which are from the original code.</li>
<li>Adding these variables as parameters to your new method.</li>
<li>Calling the new method in place of the moved code.</li>
</ol>
<p>This refactoring takes care of steps 1 through 5 and:</p>
<ul>
<li>If a <em>single</em> variable that is declared in the selection which is used in the parent
scope, it will be returned.</li>
<li>If <em>multiple</em> variables are used, the extracted method will return a tuple.</li>
<li>In both cases the variable(s) will be assigned at the point of extraction.</li>
<li>Any class parameters which are not already imported, will be imported.</li>
</ul>
<h3 id="before-and-after-8">Before and After</h3>
<p>Selection shown between the two <code>&lt;&gt;</code> markers:</p>
<pre><code class="language-php">&lt;?php

class extractMethod
{
    public function bigMethod()
    {
        $foobar = 'yes';

        &lt;&gt;
        if ($foobar) {
            return 'yes';
        }

        return $foobar;
        &lt;&gt;

    }
}</code></pre>
<p>After extracting method <code>newMethod</code>:</p>
<pre><code class="language-php">&lt;?php

class extractMethod
{
    public function bigMethod()
    {
        $foobar = 'yes';

        $this-&gt;newMethod($foobar);

    }

    private function newMethod(string $foobar)
    {
        if ($foobar) {
            return 'yes';
        }

        return $foobar;
    }
}</code></pre>
<h2 id="extract-interface">Extract Interface</h2>
<p>Extract an interface from a class. If a wildcard is given (CLI only) generate an interface per class.</p>
<ul>
<li><strong>Command</strong>: <code>$ phpactor class:inflect path/to/Class.php path/to/Interface.php</code> (wild card accepted).</li>
<li><strong>VIM plugin</strong>: <em>Class context menu &gt; Inflect &gt; Extract interface</em>.</li>
<li><strong>VIM function</strong>:<code>:call phpactor#ClassInflect()</code></li>
</ul>
<h3 id="motivation-9">Motivation</h3>
<p>It is sometimes unwise to preemptively create interfaces for all your classes,
as doing so adds maintainance overhead, and the interfaces may never be needed.</p>
<p>This refactoring allows you to generate an interface from an existing class. All public methods
will be added to generated interface.</p>
<h3 id="before-and-after-9">Before and After</h3>
<pre><code class="language-php">&lt;?php

class Foobar
{
    public function foobar(string $bar): Barfoo
    {
    }
}</code></pre>
<p>Generated interface (suffix added for illustration):</p>
<pre><code class="language-php">&lt;?php

interface FoobarInterface
{
    public function foobar(string $bar): Barfoo;
}</code></pre>
<h2 id="generate-accessor">Generate Accessor</h2>
<p>Generate an accessor for a class property.</p>
<ul>
<li><strong>Command</strong>: <em>RPC only</em></li>
<li><strong>VIM plugin</strong>: <em>Property context menu &gt; Generate accessor</em>.</li>
<li><strong>VIM function</strong>:<code>:call phpactor#ContextMenu()</code></li>
</ul>
<h3 id="motivation-10">Motivation</h3>
<p>When creating entities and value objects it is frequently necessary to add accessors.</p>
<p>This refactoring automates the generation of accessors.</p>
<h3 id="before-and-after-10">Before and After</h3>
<p>Cursor position shown as <code>&lt;&gt;</code>:</p>
<pre><code class="language-php">&lt;?php

class Foobar
{
    /**
     * @var Barfoo
     */
    private $bar&lt;&gt;foo;
}</code></pre>
<p>After:</p>
<pre><code class="language-php">&lt;?php

class Foobar
{
    /**
     * @var Barfoo
     */
    private $barfoo;

    public function barfoo(): Barfoo
    {
        return $this-&gt;barfoo;
    }
}</code></pre>
<p>Note the accessor template can be customized see <a href="templates.html">Templates</a>.</p>
<h2 id="generate-method">Generate Method</h2>
<p>Generate or update a method based on the method call under the cursor.</p>
<ul>
<li><strong>Command</strong>: <em>RPC only</em></li>
<li><strong>VIM plugin</strong>: <em>Method context menu &gt; Generate method</em>.</li>
<li><strong>VIM function</strong>:<code>:call phpactor#ContextMenu()</code></li>
</ul>
<h3 id="motivation-11">Motivation</h3>
<p>When initially authoring a package you will often write a method call which
doesn't exist and then add the method to the corresponding class.</p>
<p>This refactoring will automatically generate the method inferring any type
information that it can.</p>
<h3 id="before-and-after-11">Before and After</h3>
<p>Cursor position shown as <code>&lt;&gt;</code>:</p>
<pre><code class="language-php">&lt;?php

class Foobar
{
    /**
     * @var Barfoo
     */
    private $barfoo;

    // ...

    public function hello(Hello $hello)
    {
         $this-&gt;barfoo-&gt;good&lt;&gt;bye($hello);
    }
}

class Barfoo
{
}</code></pre>
<p>After generating the method:</p>
<pre><code class="language-php">&lt;?php

class Foobar
{
    /**
     * @var Barfoo
     */
    private $barfoo;

    // ...

    public function hello(Hello $hello)
    {
         $this-&gt;barfoo-&gt;goodbye($hello);
    }
}

class Barfoo
{
    public function goodbye(Hello $hello)
    {
    }
}</code></pre>
<h2 id="implement-contracts">Implement Contracts</h2>
<p>Add any non-implemented methods from interfaces or abstract classes.</p>
<ul>
<li><strong>Command</strong>: <code>$ phpactor class:transform /path/to/class.php --transform=implement_contracts</code></li>
<li><strong>VIM plugin</strong>: <em>Class context menu &gt; Transform &gt; Implement contracts</em>.</li>
<li><strong>VIM function</strong>:<code>:call phpactor#Transform()</code></li>
</ul>
<h3 id="motivation-12">Motivation</h3>
<p>It can be very tiresome to manually implement contracts for interfaces and abstract classes,
especially interfaces with many methods (e.g. <code>ArrayAccess</code>).</p>
<p>This refactoring will automatically add the required methods to your class. If
the interface uses any foreign classes, the necessary <code>use</code> statements will
also be added.</p>
<h3 id="before-and-after-12">Before and After</h3>
<pre><code class="language-php">&lt;?php

class Foobar implements Countable
{
}</code></pre>
<p>After:</p>
<pre><code class="language-php">&lt;?php

class Foobar implements Countable
{
    public function count()
    {
    }
}</code></pre>
<h2 id="import-class">Import Class</h2>
<p>Import a class into the current namespace based on the class name under the cursor.</p>
<ul>
<li><strong>Command</strong>: <em>VIM function only</em></li>
<li><strong>VIM plugin</strong>: <em>VIM function only</em></li>
<li><strong>VIM function</strong>:<code>:call phpactor#UseAdd()</code></li>
</ul>
<h3 id="motivation-13">Motivation</h3>
<p>It is easy to remember the name of a class, but more difficult to remember its
namespace, and certainly it is time consuming to manually code class imports:</p>
<p>Manually one would:</p>
<ol>
<li>Perform a fuzzy search for the class by its short name.</li>
<li>Identify the class you want to import.</li>
<li>Copy the namespace.</li>
<li>Paste it into your current file</li>
<li>Add the class name to the new <code>use</code> statement.</li>
</ol>
<p>This refactoring covers steps 1, 3, 4 and 5.</p>
<h3 id="before-and-after-13">Before and After</h3>
<p>Cursor position shown as <code>&lt;&gt;</code>:</p>
<pre><code class="language-php">&lt;?php

class Hello
{
    public function index(Re&lt;&gt;quest $request)
    {
    }

}</code></pre>
<p>After selecting <code>Symfony\Component\HttpFoundation\Request</code> from the list of candidates:</p>
<pre><code class="language-php">&lt;?php

use Symfony\Component\HttpFoundation\Request;

class Hello
{
    public function index(Request $request)
    {
    }
}</code></pre>
<h2 id="override-method">Override Method</h2>
<p>Overide a method from a parent class.</p>
<ul>
<li><strong>Command</strong>: <em>RPC only</em></li>
<li><strong>VIM plugin</strong>: <em>Class context menu &gt; Override method</em>.</li>
<li><strong>VIM function</strong>:<code>:call phpactor#ContextMenu()</code></li>
</ul>
<h3 id="motivation-14">Motivation</h3>
<p>Sometimes it is expected or necessary that you override a parent classes method
(for example when authoring a Symfony Command class).</p>
<p>This refactoring will allow you to select a method to override and generate that method
in your class.</p>
<h3 id="before-and-after-14">Before and After</h3>
<pre><code class="language-php">&lt;?php

use Symfony\Component\Console\Command\Command;

class MyCommand extends Command
{
}</code></pre>
<p>Override method <code>execute</code>:</p>
<pre><code class="language-php">&lt;?php

use Symfony\Component\Console\Command\Command;
use Symfony\Component\Console\Input\InputInterface;
use Symfony\Component\Console\Output\OutputInterface;

class MyCommand extends Command
{
    protected function execute(InputInterface $input, OutputInterface $output)
    {
    }
}</code></pre>
<h2 id="rename-variable">Rename Variable</h2>
<p>Rename a variable in the local or class scope.</p>
<ul>
<li><strong>Command</strong>: <em>RPC only</em></li>
<li><strong>VIM plugin</strong>: <em>Variable context menu &gt; Rename</em>.</li>
<li><strong>VIM function</strong>:<code>:call phpactor#ContextMenu()</code></li>
</ul>
<h3 id="motivation-15">Motivation</h3>
<p>Having meaningful and descriptive variable names makes the intention of
code clearer and therefore easier to maintain. Renaming variables is a frequent
refactoring, but doing this with a simple search and replace can often have unintended
consequences (e.g. renaming the variable <code>$class</code> also changes the <code>class</code> keyword).</p>
<p>This refactoring will rename a variable, and only variables, in either the method scope
or the class scope.</p>
<h3 id="before-and-after-15">Before and After</h3>
<p>Cursor position shown as <code>&lt;&gt;</code>:</p>
<pre><code class="language-php">&lt;?php

class Hello
{
    public function say(array $hell&lt;&gt;os)
    {
        foreach ($hellos as $greeting) {
            echo $greeting;
        }

        return $hellos;
    }

}</code></pre>
<p>Rename the variable <code>$hellos</code> to <code>$foobars</code> in the local scope:</p>
<pre><code class="language-php">&lt;?php

class Hello
{
    public function say(array $foobars)
    {
        foreach ($foobars as $greeting) {
            echo $greeting;
        }

        return $foobars;
    }

}</code></pre>
<h2 id="rename-class">Rename Class</h2>
<p>Rename a class.</p>
<ul>
<li><strong>Command</strong>: <code>$ phpactor references:class path/to/Class.php --replace="NewName"</code> (class FQN accepted)</li>
<li><strong>VIM plugin</strong>: <em>Class context menu &gt; Replace references</em>.</li>
<li><strong>VIM function</strong>:<code>:call phpactor#ContextMenu()</code></li>
</ul>
<h3 id="motivation-16">Motivation</h3>
<p>This refactoring is <em>similar</em> to <a href="#class-move">Move Class</a>, but without
renaming the file. This is a useful refactoring when a dependant library has
changed a class name and you need to update that class name in your project.</p>
<h3 id="before-and-after-16">Before and After</h3>
<p>Cursor position shown as <code>&lt;&gt;</code>:</p>
<pre><code class="language-php">&lt;?php

class Hel&lt;&gt;lo
{
    public function say()
    {

    }

}

$hello = new Hello();
$hello-&gt;say();</code></pre>
<p>Rename <code>Hello</code> to <code>Goodbye</code></p>
<pre><code class="language-php">&lt;?php

class Goodbye
{
    public function say()
    {

    }

}

$hello = new Goodbye();
$hello-&gt;say();</code></pre>
<div class="alert alert-danger">
When renaming classes in your project use <a href="#class-move">Class Move</a>.
</div>
<h2 id="rename-class-member">Rename Class Member</h2>
<p>Rename a class member.</p>
<ul>
<li><strong>Command</strong>: <code>$ phpactor references:member path/to/Class.php memberName --type="method" --replace="newMemberName"</code> (FQN accepted)</li>
<li><strong>VIM plugin</strong>: <em>Member context menu &gt; Replace references</em>.</li>
<li><strong>VIM function</strong>:<code>:call phpactor#ContextMenu()</code></li>
</ul>
<h3 id="motivation-17">Motivation</h3>
<p>Having an API which is expressive of the intent of the class is important, and
contributes to making your code more consistent and maintainable.</p>
<p>When renaming members global search and replace can be used, but is a shotgun approach and
you may end up replacing many things you did not mean to replace (e.g. imagine renaming the method <code>name()</code>).</p>
<p>This refactoring will:</p>
<ol>
<li>Scan for files in your project which contain the member name text.</li>
<li>Parse all of the candidate files.</li>
<li>Identify the members, and try and identify the containing class.</li>
<li>Replace only the members which certainly belong to the target class.</li>
</ol>
<p>When replacing <em>private</em> and <em>protected</em> members, only the related classes
will be updated.</p>
<p>Due to the loosely typed nature of PHP this refactoring may not find all of
the member accesses for the given class. Run your tests before and after
applying this refactoring.</p>
<div class="alert alert-info">
<b>Hint</b>: Use the CLI command to list all of the <b>risky</b> references. Risky references are those member accesses which match
the query but whose containing classes could not be resolved.
</div>
<p><img src="images/risky.png" alt="Risky references" /></p>
<h3 id="before-and-after-17">Before and After</h3>
<p>Cursor position shown as <code>&lt;&gt;</code>:</p>
<pre><code class="language-php">&lt;?php

class Hello
{
    public function sa&lt;&gt;y()
    {

    }

}

$hello = new Hello();
$hello-&gt;say();</code></pre>
<p>Rename <code>Hello#say()</code> to <code>Hello#speak()</code></p>
<pre><code class="language-php">&lt;?php

class Hello
{
    public function speak()
    {

    }

}

$hello = new Hello();
$hello-&gt;speak();</code></pre>
                </section>

            </div>

        </main>

        <script src="//code.jquery.com/jquery-1.11.0.min.js"></script>
        <script src="//netdna.bootstrapcdn.com/bootstrap/3.1.1/js/bootstrap.min.js"></script>
        <script src="//yandex.st/highlightjs/7.5/highlight.min.js"></script>

        <script>
            $(function() {
                $("section>h1").wrap('<div class="page-header" />');
                $("section>h2").each(function (index, value) {
                    $(value).append('&nbsp;<a href="#' + $(value).attr('id') + '"><i class="fa small fa-link"></i></a>');
                });
                // Syntax highlighting
                hljs.initHighlightingOnLoad();
            });
        </script>

		<footer>
<hr />
<center>
			<a href="https://github.com/phpactor/phpactor">
				<i class="fa fa-github"></i>
Fork me on Github!
			</a>
</center>
		</footer>

	</body>
</html>
